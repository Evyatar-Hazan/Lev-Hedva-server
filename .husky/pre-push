#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-push checks..."

# Run all tests with coverage
echo "Running full test suite with coverage..."
npm run test:pre-push

# Check if tests passed
if [ $? -ne 0 ]; then
  echo "âŒ Tests or coverage check failed. Push aborted."
  echo "ğŸ’¡ Ensure all tests pass and coverage meets the 80% threshold."
  echo "ğŸ’¡ Use 'git push --no-verify' to bypass (strongly discouraged)"
  exit 1
fi

echo "âœ… Pre-push checks passed! Pushing code..."
